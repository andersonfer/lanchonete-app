# Plano de MigraÃ§Ã£o: ReestruturaÃ§Ã£o Completa para Clean Architecture

## ğŸ¯ OBJETIVO
Reorganizar completamente a estrutura de pacotes para seguir rigorosamente os princÃ­pios de Clean Architecture.

## ğŸ“‹ ESTRUTURA ALVO

```
br.com.lanchonete.autoatendimento/
â”‚
â”œâ”€â”€ aplicacao/                    # Application Business Rules
â”‚   â”œâ”€â”€ casosdeuso/              # Use Cases
â”‚   â”‚   â”œâ”€â”€ cliente/
â”‚   â”‚   â”‚   â”œâ”€â”€ CadastrarCliente.java
â”‚   â”‚   â”‚   â””â”€â”€ IdentificarCliente.java
â”‚   â”‚   â”œâ”€â”€ produto/
â”‚   â”‚   â”‚   â”œâ”€â”€ CriarProduto.java
â”‚   â”‚   â”‚   â”œâ”€â”€ EditarProduto.java
â”‚   â”‚   â”‚   â”œâ”€â”€ RemoverProduto.java
â”‚   â”‚   â”‚   â””â”€â”€ BuscarProdutosPorCategoria.java
â”‚   â”‚   â””â”€â”€ pedido/
â”‚   â”‚       â”œâ”€â”€ RealizarPedido.java
â”‚   â”‚       â””â”€â”€ ListarPedidos.java
â”‚   â”œâ”€â”€ servicos/                # Application Services  
â”‚   â”‚   â”œâ”€â”€ ClienteApplicationService.java
â”‚   â”‚   â”œâ”€â”€ ProdutoApplicationService.java
â”‚   â”‚   â””â”€â”€ PedidoApplicationService.java
â”‚   â””â”€â”€ portas/                  # Interfaces (Ports)
â”‚       â”œâ”€â”€ entrada/             # Input Ports (se necessÃ¡rio)
â”‚       â””â”€â”€ saida/               # Output Ports (Gateways)
â”‚           â”œâ”€â”€ ClienteGateway.java
â”‚           â”œâ”€â”€ ProdutoGateway.java
â”‚           â””â”€â”€ PedidoGateway.java
â”‚
â”œâ”€â”€ dominio/                     # Enterprise Business Rules
â”‚   â”œâ”€â”€ modelo/                  # Entities + Value Objects
â”‚   â”‚   â”œâ”€â”€ cliente/
â”‚   â”‚   â”‚   â””â”€â”€ Cliente.java
â”‚   â”‚   â”œâ”€â”€ produto/
â”‚   â”‚   â”‚   â”œâ”€â”€ Produto.java
â”‚   â”‚   â”‚   â””â”€â”€ Categoria.java
â”‚   â”‚   â”œâ”€â”€ pedido/
â”‚   â”‚   â”‚   â”œâ”€â”€ Pedido.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ItemPedido.java
â”‚   â”‚   â”‚   â””â”€â”€ StatusPedido.java
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â”‚       â”œâ”€â”€ Cpf.java
â”‚   â”‚       â”œâ”€â”€ Email.java
â”‚   â”‚       â”œâ”€â”€ Preco.java
â”‚   â”‚       â””â”€â”€ NumeroPedido.java
â”‚   â””â”€â”€ excecoes/               # Domain Exceptions
â”‚       â”œâ”€â”€ ValidacaoException.java
â”‚       â””â”€â”€ RecursoNaoEncontradoException.java
â”‚
â”œâ”€â”€ adaptadores/                 # Interface Adapters
â”‚   â”œâ”€â”€ rest/                   # REST Layer
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClienteController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ProdutoController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ PedidoController.java
â”‚   â”‚   â”‚   â””â”€â”€ TratarExcecaoController.java
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClienteApi.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ProdutoApi.java
â”‚   â”‚   â”‚   â””â”€â”€ PedidoApi.java
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ ClienteRequestDTO.java
â”‚   â”‚       â”œâ”€â”€ ClienteResponseDTO.java
â”‚   â”‚       â”œâ”€â”€ ProdutoRequestDTO.java
â”‚   â”‚       â”œâ”€â”€ ProdutoResponseDTO.java
â”‚   â”‚       â”œâ”€â”€ PedidoRequestDTO.java
â”‚   â”‚       â”œâ”€â”€ PedidoResponseDTO.java
â”‚   â”‚       â”œâ”€â”€ ItemPedidoDTO.java
â”‚   â”‚       â””â”€â”€ ItemPedidoResponseDTO.java
â”‚   â””â”€â”€ persistencia/           # Data Access Layer
â”‚       â”œâ”€â”€ ClienteGatewayJDBC.java
â”‚       â”œâ”€â”€ ProdutoGatewayJDBC.java
â”‚       â””â”€â”€ PedidoGatewayJDBC.java
â”‚
â””â”€â”€ infra/                      # Frameworks & Drivers
    â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ ClienteServiceConfig.java
    â”‚   â”œâ”€â”€ ProdutoServiceConfig.java
    â”‚   â”œâ”€â”€ PedidoServiceConfig.java
    â”‚   â”œâ”€â”€ RepositorioConfig.java
    â”‚   â”œâ”€â”€ JdbcConfig.java
    â”‚   â””â”€â”€ SwaggerConfig.java
    â””â”€â”€ util/
        â””â”€â”€ Utils.java
```

## ğŸ”„ PLANO DE MIGRAÃ‡ÃƒO

### **FASE 1: CRIAR NOVA ESTRUTURA**
1. Criar pacotes da nova estrutura
2. Mover arquivos para posiÃ§Ãµes corretas
3. Atualizar todos os imports

### **FASE 2: REORGANIZAR DOMÃNIO**
1. Mover entidades para `dominio/modelo/`
2. Mover exceÃ§Ãµes para `dominio/excecoes/`
3. Atualizar imports das entidades

### **FASE 3: REORGANIZAR APLICAÃ‡ÃƒO**
1. Mover Use Cases para `aplicacao/casosdeuso/`
2. Mover interfaces para `aplicacao/portas/saida/`
3. Criar Application Services em `aplicacao/servicos/`

### **FASE 4: REORGANIZAR ADAPTADORES**
1. Mover Controllers para `adaptadores/rest/controllers/`
2. Mover APIs para `adaptadores/rest/api/`
3. Mover DTOs para `adaptadores/rest/dto/`
4. Mover Gateways para `adaptadores/persistencia/`

### **FASE 5: REORGANIZAR INFRAESTRUTURA**
1. Mover configuraÃ§Ãµes para `infra/config/`
2. Mover utilitÃ¡rios para `infra/util/`

### **FASE 6: ATUALIZAR DEPENDÃŠNCIAS**
1. Controllers injetam Application Services
2. Application Services injetam Use Cases
3. Use Cases dependem de interfaces (portas)
4. Gateways implementam interfaces

### **FASE 7: LIMPEZA E VALIDAÃ‡ÃƒO**
1. Remover anotaÃ§Ãµes Spring dos Use Cases
2. Verificar Dependency Rule
3. Executar todos os testes
4. Validar endpoints

## âš ï¸ CUIDADOS ESPECIAIS

1. **Manter funcionalidade:** Todos os testes devem continuar passando
2. **Atualizar imports:** SerÃ¡ necessÃ¡rio atualizar muitos imports
3. **ConfiguraÃ§Ãµes Spring:** Ajustar scan de componentes para nova estrutura
4. **Testes:** Atualizar packages nos testes

## ğŸ“Š RESULTADO ESPERADO

- âœ… 100% conforme Clean Architecture
- âœ… Dependency Rule respeitada
- âœ… SeparaÃ§Ã£o clara de responsabilidades
- âœ… CÃ³digo mais maintÃ­vel e testÃ¡vel
- âœ… Estrutura escalÃ¡vel para crescimento

## ğŸ¯ BENEFÃCIOS

1. **Clareza arquitetural:** Cada camada tem responsabilidade bem definida
2. **Testabilidade:** Use Cases puros, sem dependÃªncias de framework
3. **Manutenibilidade:** MudanÃ§as isoladas em suas respectivas camadas
4. **Escalabilidade:** Estrutura preparada para crescimento do sistema
5. **Conformidade:** 100% alinhado com princÃ­pios Clean Architecture